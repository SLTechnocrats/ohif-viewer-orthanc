{"version":3,"file":"4353.bundle.7d1d19c4fe7a9dcbf7f9.js","mappings":"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","sources":["webpack:///../../../modes/tmtv/src/initToolGroups.js","webpack:///../../../modes/tmtv/src/toolbarButtons.js","webpack:///../../../modes/tmtv/src/id.js","webpack:///../../../modes/tmtv/src/index.ts","webpack:///../../../modes/tmtv/src/utils/setCrosshairsConfiguration.js","webpack:///../../../modes/tmtv/src/utils/setFusionActiveVolume.js"],"sourcesContent":["export const toolGroupIds = {\n  CT: 'ctToolGroup',\n  PT: 'ptToolGroup',\n  Fusion: 'fusionToolGroup',\n  MIP: 'mipToolGroup',\n  default: 'default',\n};\n\nfunction _initToolGroups(\n  toolNames,\n  Enums,\n  toolGroupService,\n  commandsManager,\n  modeLabelConfig,\n  servicesManager\n) {\n  const tools = {\n    active: [\n      {\n        toolName: toolNames.WindowLevel,\n        bindings: [{ mouseButton: Enums.MouseBindings.Primary }],\n      },\n      {\n        toolName: toolNames.Pan,\n        bindings: [{ mouseButton: Enums.MouseBindings.Auxiliary }],\n      },\n      {\n        toolName: toolNames.Zoom,\n        bindings: [{ mouseButton: Enums.MouseBindings.Secondary }],\n      },\n      { toolName: toolNames.StackScrollMouseWheel, bindings: [] },\n    ],\n    passive: [\n      { toolName: toolNames.Length },\n      {\n        toolName: toolNames.ArrowAnnotate,\n        configuration: {\n          getTextCallback: (callback, eventDetails) => {\n            if (modeLabelConfig) {\n              callback(' ');\n            } else {\n              commandsManager.runCommand('arrowTextCallback', {\n                callback,\n                eventDetails,\n              });\n            }\n          },\n          changeTextCallback: (data, eventDetails, callback) => {\n            if (modeLabelConfig === undefined) {\n              commandsManager.runCommand('arrowTextCallback', {\n                callback,\n                data,\n                eventDetails,\n              });\n            }\n          },\n        },\n      },\n      { toolName: toolNames.Bidirectional },\n      { toolName: toolNames.DragProbe },\n      { toolName: toolNames.Probe },\n      { toolName: toolNames.EllipticalROI },\n      { toolName: toolNames.RectangleROI },\n      { toolName: toolNames.StackScroll },\n      { toolName: toolNames.Angle },\n      { toolName: toolNames.CobbAngle },\n      { toolName: toolNames.Magnify },\n      {\n        toolName: 'CircularBrush',\n        parentTool: 'Brush',\n        configuration: {\n          activeStrategy: 'FILL_INSIDE_CIRCLE',\n        },\n      },\n      {\n        toolName: 'CircularEraser',\n        parentTool: 'Brush',\n        configuration: {\n          activeStrategy: 'ERASE_INSIDE_CIRCLE',\n        },\n      },\n      {\n        toolName: 'SphereBrush',\n        parentTool: 'Brush',\n        configuration: {\n          activeStrategy: 'FILL_INSIDE_SPHERE',\n        },\n      },\n      {\n        toolName: 'SphereEraser',\n        parentTool: 'Brush',\n        configuration: {\n          activeStrategy: 'ERASE_INSIDE_SPHERE',\n        },\n      },\n      {\n        toolName: 'ThresholdCircularBrush',\n        parentTool: 'Brush',\n        configuration: {\n          activeStrategy: 'THRESHOLD_INSIDE_CIRCLE',\n        },\n      },\n      {\n        toolName: 'ThresholdSphereBrush',\n        parentTool: 'Brush',\n        configuration: {\n          activeStrategy: 'THRESHOLD_INSIDE_SPHERE',\n        },\n      },\n      {\n        toolName: 'ThresholdCircularBrushDynamic',\n        parentTool: 'Brush',\n        configuration: {\n          activeStrategy: 'THRESHOLD_INSIDE_CIRCLE',\n          // preview: {\n          //   enabled: true,\n          // },\n          strategySpecificConfiguration: {\n            // to use the use the center segment index to determine\n            // if inside -> same segment, if outside -> eraser\n            // useCenterSegmentIndex: true,\n            THRESHOLD: {\n              isDynamic: true,\n              dynamicRadius: 3,\n            },\n          },\n        },\n      },\n    ],\n    enabled: [{ toolName: toolNames.SegmentationDisplay }],\n    disabled: [\n      {\n        toolName: toolNames.Crosshairs,\n        configuration: {\n          disableOnPassive: true,\n          autoPan: {\n            enabled: false,\n            panSize: 10,\n          },\n        },\n      },\n    ],\n  };\n\n  toolGroupService.createToolGroupAndAddTools(toolGroupIds.CT, tools);\n  toolGroupService.createToolGroupAndAddTools(toolGroupIds.PT, {\n    active: tools.active,\n    passive: [...tools.passive, { toolName: 'RectangleROIStartEndThreshold' }],\n    enabled: tools.enabled,\n    disabled: tools.disabled,\n  });\n  toolGroupService.createToolGroupAndAddTools(toolGroupIds.Fusion, tools);\n  toolGroupService.createToolGroupAndAddTools(toolGroupIds.default, tools);\n\n  const mipTools = {\n    active: [\n      {\n        toolName: toolNames.VolumeRotateMouseWheel,\n        configuration: {\n          rotateIncrementDegrees: 5,\n        },\n      },\n      {\n        toolName: toolNames.MipJumpToClick,\n        configuration: {\n          toolGroupId: toolGroupIds.PT,\n        },\n        bindings: [{ mouseButton: Enums.MouseBindings.Primary }],\n      },\n    ],\n    enabled: [\n      { toolName: toolNames.SegmentationDisplay },\n      {\n        toolName: toolNames.OrientationMarker,\n        configuration: {\n          orientationWidget: {\n            viewportCorner: 'BOTTOM_LEFT',\n          },\n        },\n      },\n    ],\n  };\n\n  toolGroupService.createToolGroupAndAddTools(toolGroupIds.MIP, mipTools);\n}\n\nfunction initToolGroups(\n  toolNames,\n  Enums,\n  toolGroupService,\n  commandsManager,\n  modeLabelConfig,\n  servicesManager\n) {\n  _initToolGroups(\n    toolNames,\n    Enums,\n    toolGroupService,\n    commandsManager,\n    modeLabelConfig,\n    servicesManager\n  );\n}\n\nexport default initToolGroups;\n","import { ToolbarService } from '@ohif/core';\nimport { toolGroupIds } from './initToolGroups';\n\nconst { createButton } = ToolbarService;\n\nconst setToolActiveToolbar = {\n  commandName: 'setToolActiveToolbar',\n  commandOptions: {\n    toolGroupIds: [toolGroupIds.CT, toolGroupIds.PT, toolGroupIds.Fusion],\n  },\n};\n\nconst toolbarButtons = [\n  {\n    id: 'MeasurementTools',\n    uiType: 'ohif.splitButton',\n    props: {\n      groupId: 'MeasurementTools',\n      // group evaluate to determine which item should move to the top\n      evaluate: 'evaluate.group.promoteToPrimaryIfCornerstoneToolNotActiveInTheList',\n      primary: createButton({\n        id: 'Length',\n        icon: 'tool-length',\n        label: 'Length',\n        tooltip: 'Length Tool',\n        commands: setToolActiveToolbar,\n        evaluate: 'evaluate.cornerstoneTool',\n      }),\n      secondary: {\n        icon: 'chevron-down',\n        tooltip: 'More Measure Tools',\n      },\n      items: [\n        createButton({\n          id: 'Length',\n          icon: 'tool-length',\n          label: 'Length',\n          tooltip: 'Length Tool',\n          commands: setToolActiveToolbar,\n          evaluate: 'evaluate.cornerstoneTool',\n        }),\n        createButton({\n          id: 'Bidirectional',\n          icon: 'tool-bidirectional',\n          label: 'Bidirectional',\n          tooltip: 'Bidirectional Tool',\n          commands: setToolActiveToolbar,\n          evaluate: 'evaluate.cornerstoneTool',\n        }),\n        createButton({\n          id: 'ArrowAnnotate',\n          icon: 'tool-annotate',\n          label: 'Annotation',\n          tooltip: 'Arrow Annotate',\n          commands: setToolActiveToolbar,\n          evaluate: 'evaluate.cornerstoneTool',\n        }),\n        // createButton({\n        //   id: 'EllipticalROI',\n        //   icon: 'tool-ellipse',\n        //   label: 'Ellipse',\n        //   tooltip: 'Ellipse ROI',\n        //   commands: setToolActiveToolbar,\n        //   evaluate: 'evaluate.cornerstoneTool',\n        // }),\n        // createButton({\n        //   id: 'RectangleROI',\n        //   icon: 'tool-rectangle',\n        //   label: 'Rectangle',\n        //   tooltip: 'Rectangle ROI',\n        //   commands: setToolActiveToolbar,\n        //   evaluate: 'evaluate.cornerstoneTool',\n        // }),\n        createButton({\n          id: 'CircleROI',\n          icon: 'tool-circle',\n          label: 'Circle',\n          tooltip: 'Circle Tool',\n          commands: setToolActiveToolbar,\n          evaluate: 'evaluate.cornerstoneTool',\n        }),\n        createButton({\n          id: 'PlanarFreehandROI',\n          icon: 'icon-tool-freehand-roi',\n          label: 'Freehand ROI',\n          tooltip: 'Freehand ROI',\n          commands: setToolActiveToolbar,\n          evaluate: 'evaluate.cornerstoneTool',\n        }),\n        createButton({\n          id: 'SplineROI',\n          icon: 'icon-tool-spline-roi',\n          label: 'Spline ROI',\n          tooltip: 'Spline ROI',\n          commands: setToolActiveToolbar,\n          evaluate: 'evaluate.cornerstoneTool',\n        }),\n        createButton({\n          id: 'LivewireContour',\n          icon: 'icon-tool-livewire',\n          label: 'Livewire tool',\n          tooltip: 'Livewire tool',\n          commands: setToolActiveToolbar,\n          evaluate: 'evaluate.cornerstoneTool',\n        }),\n      ],\n    },\n  },\n  {\n    id: 'EllipticalROI',\n    uiType: 'ohif.radioGroup',\n    props: {\n      icon: 'tool-ellipse',\n      label: 'Ellipse',\n      tooltip: 'Ellipse ROI',\n      commands: setToolActiveToolbar,\n      evaluate: 'evaluate.cornerstoneTool',\n    },\n  },\n  {\n    id: 'Magnify',\n    uiType: 'ohif.radioGroup',\n    props: {\n      icon: 'tool-magnify',\n      label: 'Zoom-in',\n      tooltip: 'Zoom-in',\n      commands: setToolActiveToolbar,\n      evaluate: 'evaluate.cornerstoneTool',\n    },\n  },\n  {\n    id: 'RectangleROI',\n    uiType: 'ohif.radioGroup',\n    props: {\n      icon: 'tool-rectangle',\n      label: 'Rectangle',\n      tooltip: 'Rectangle ROI',\n      commands: setToolActiveToolbar,\n      evaluate: 'evaluate.cornerstoneTool',\n    },\n  },\n  {},\n  {\n    id: 'Zoom',\n    uiType: 'ohif.radioGroup',\n    props: {\n      icon: 'tool-zoom',\n      label: 'Zoom',\n      commands: setToolActiveToolbar,\n      evaluate: 'evaluate.cornerstoneTool',\n    },\n  },\n  // Window Level\n  {\n    id: 'WindowLevel',\n    uiType: 'ohif.radioGroup',\n    props: {\n      icon: 'tool-window-level',\n      label: 'Window Level',\n      commands: setToolActiveToolbar,\n      evaluate: 'evaluate.cornerstoneTool',\n    },\n  },\n  // Pan...\n  {\n    id: 'Pan',\n    uiType: 'ohif.radioGroup',\n    props: {\n      type: 'tool',\n      icon: 'tool-move',\n      label: 'Pan',\n      commands: setToolActiveToolbar,\n      evaluate: 'evaluate.cornerstoneTool',\n    },\n  },\n  {\n    id: 'Cine',\n    uiType: 'ohif.radioGroup',\n    props: {\n      icon: 'tool-cine',\n      label: 'Cine',\n      tooltip: 'Cine',\n      commands: 'toggleCine',\n      evaluate: ['evaluate.cine', 'evaluate.not3D'],\n    },\n  },\n  {\n    id: 'Angle',\n    uiType: 'ohif.radioGroup',\n    props: {\n      icon: 'tool-angle',\n      label: 'Angle',\n      tooltip: 'Angle',\n      commands: setToolActiveToolbar,\n      evaluate: 'evaluate.cornerstoneTool',\n    },\n  },\n  {\n    id: 'TrackballRotate',\n    uiType: 'ohif.radioGroup',\n    props: {\n      type: 'tool',\n      icon: 'tool-3d-rotate',\n      label: '3D Rotate',\n      commands: setToolActiveToolbar,\n      evaluate: {\n        name: 'evaluate.cornerstoneTool',\n        disabledText: 'Select a 3D viewport to enable this tool',\n      },\n    },\n  },\n  {\n    id: 'Capture',\n    uiType: 'ohif.radioGroup',\n    props: {\n      icon: 'tool-capture',\n      label: 'Capture',\n      commands: 'showDownloadViewportModal',\n      evaluate: 'evaluate.action',\n    },\n  },\n  {\n    id: 'Layout',\n    uiType: 'ohif.layoutSelector',\n    props: {\n      rows: 3,\n      columns: 4,\n      evaluate: 'evaluate.action',\n    },\n  },\n  {\n    id: 'StackScroll',\n    uiType: 'ohif.radioGroup',\n    props: {\n      icon: 'tool-stack-scroll',\n      label: 'Stack Scroll',\n      tooltip: 'Stack Scroll',\n      commands: setToolActiveToolbar,\n      evaluate: 'evaluate.cornerstoneTool',\n    },\n  },\n  {\n    id: 'Probe',\n    uiType: 'ohif.radioGroup',\n    props: {\n      icon: 'tool-probe',\n      label: 'Probe',\n      tooltip: 'Probe',\n      commands: setToolActiveToolbar,\n      evaluate: 'evaluate.cornerstoneTool',\n    },\n  },\n  {\n    id: 'Crosshairs',\n    uiType: 'ohif.radioGroup',\n    props: {\n      type: 'tool',\n      icon: 'tool-crosshair',\n      label: 'Crosshairs',\n      commands: {\n        commandName: 'setToolActiveToolbar',\n        commandOptions: {\n          toolGroupIds: ['mpr'],\n        },\n      },\n      evaluate: {\n        name: 'evaluate.cornerstoneTool',\n        disabledText: 'Select an MPR viewport to enable this tool',\n      },\n    },\n  },\n  // {\n  //   id: 'MeasurementTools',\n  //   uiType: 'ohif.splitButton',\n  //   props: {\n  //     groupId: 'MeasurementTools',\n  //     primary: ToolbarService.createButton({\n  //       id: 'Length',\n  //       icon: 'tool-length',\n  //       label: 'Length',\n  //       tooltip: 'Length Tool',\n  //       commands: setToolActiveToolbar,\n  //       evaluate: 'evaluate.cornerstoneTool',\n  //     }),\n  //     secondary: {\n  //       icon: 'chevron-down',\n  //       tooltip: 'More Measure Tools',\n  //     },\n  //     items: [\n  //       ToolbarService.createButton({\n  //         id: 'Bidirectional',\n  //         icon: 'tool-bidirectional',\n  //         label: 'Bidirectional',\n  //         tooltip: 'Bidirectional Tool',\n  //         commands: setToolActiveToolbar,\n  //         evaluate: 'evaluate.cornerstoneTool',\n  //       }),\n  //       ToolbarService.createButton({\n  //         id: 'ArrowAnnotate',\n  //         icon: 'tool-annotate',\n  //         label: 'Arrow Annotate',\n  //         tooltip: 'Arrow Annotate Tool',\n  //         commands: setToolActiveToolbar,\n  //         evaluate: 'evaluate.cornerstoneTool',\n  //       }),\n  //       ToolbarService.createButton({\n  //         id: 'EllipticalROI',\n  //         icon: 'tool-ellipse',\n  //         label: 'Ellipse',\n  //         tooltip: 'Ellipse Tool',\n  //         commands: setToolActiveToolbar,\n  //         evaluate: 'evaluate.cornerstoneTool',\n  //       }),\n  //     ],\n  //   },\n  // },\n  // {\n  //   id: 'Magnify',\n  //   uiType: 'ohif.radioGroup',\n  //   props: {\n  //     icon: 'tool-magnify',\n  //     label: 'Zoom-in',\n  //     tooltip: 'Zoom-in',\n  //     commands: setToolActiveToolbar,\n  //     evaluate: 'evaluate.cornerstoneTool',\n  //   },\n  // },\n  // {\n  //   id: 'Zoom',\n  //   uiType: 'ohif.radioGroup',\n  //   props: {\n  //     icon: 'tool-zoom',\n  //     label: 'Zoom',\n  //     commands: setToolActiveToolbar,\n  //     evaluate: 'evaluate.cornerstoneTool',\n  //   },\n  // },\n  // // Window Level + Presets\n  // {\n  //   id: 'WindowLevel',\n  //   uiType: 'ohif.radioGroup',\n  //   props: {\n  //     icon: 'tool-window-level',\n  //     label: 'Window Level',\n  //     commands: setToolActiveToolbar,\n  //     evaluate: 'evaluate.cornerstoneTool',\n  //   },\n  // },\n  // // Crosshairs Button\n  // {\n  //   id: 'Crosshairs',\n  //   uiType: 'ohif.radioGroup',\n  //   props: {\n  //     icon: 'tool-crosshair',\n  //     label: 'Crosshairs',\n  //     commands: setToolActiveToolbar,\n  //     evaluate: 'evaluate.cornerstoneTool',\n  //   },\n  // },\n  // // Pan Button\n  // {\n  //   id: 'Pan',\n  //   uiType: 'ohif.radioGroup',\n  //   props: {\n  //     icon: 'tool-move',\n  //     label: 'Pan',\n  //     commands: setToolActiveToolbar,\n  //     evaluate: 'evaluate.cornerstoneTool',\n  //   },\n  // },\n  // Rectangle ROI Start End Threshold Button\n  {\n    id: 'RectangleROIStartEndThreshold',\n    uiType: 'ohif.radioGroup',\n    props: {\n      icon: 'tool-create-threshold',\n      label: 'Rectangle ROI Threshold',\n      commands: setToolActiveToolbar,\n      evaluate: [\n        'evaluate.cornerstone.segmentation',\n        // need to put the disabled text last, since each evaluator will\n        // merge the result text into the final result\n        {\n          name: 'evaluate.cornerstoneTool',\n          disabledText: 'Select the PT Axial to enable this tool',\n        },\n      ],\n      options: 'tmtv.RectangleROIThresholdOptions',\n    },\n  },\n  {\n    id: 'BrushTools',\n    uiType: 'ohif.buttonGroup',\n    props: {\n      groupId: 'BrushTools',\n      items: [\n        {\n          id: 'Brush',\n          icon: 'icon-tool-brush',\n          label: 'Brush',\n          evaluate: {\n            name: 'evaluate.cornerstone.segmentation',\n            toolNames: ['CircularBrush', 'SphereBrush'],\n            disabledText: 'Create new segmentation to enable this tool.',\n          },\n          options: [\n            {\n              name: 'Radius (mm)',\n              id: 'brush-radius',\n              type: 'range',\n              min: 0.5,\n              max: 99.5,\n              step: 0.5,\n              value: 25,\n              commands: {\n                commandName: 'setBrushSize',\n                commandOptions: { toolNames: ['CircularBrush', 'SphereBrush'] },\n              },\n            },\n            {\n              name: 'Shape',\n              type: 'radio',\n              id: 'brush-mode',\n              value: 'CircularBrush',\n              values: [\n                { value: 'CircularBrush', label: 'Circle' },\n                { value: 'SphereBrush', label: 'Sphere' },\n              ],\n              commands: 'setToolActiveToolbar',\n            },\n          ],\n        },\n        {\n          id: 'Eraser',\n          icon: 'icon-tool-eraser',\n          label: 'Eraser',\n          evaluate: {\n            name: 'evaluate.cornerstone.segmentation',\n            toolNames: ['CircularEraser', 'SphereEraser'],\n          },\n          options: [\n            {\n              name: 'Radius (mm)',\n              id: 'eraser-radius',\n              type: 'range',\n              min: 0.5,\n              max: 99.5,\n              step: 0.5,\n              value: 25,\n              commands: {\n                commandName: 'setBrushSize',\n                commandOptions: { toolNames: ['CircularEraser', 'SphereEraser'] },\n              },\n            },\n            {\n              name: 'Shape',\n              type: 'radio',\n              id: 'eraser-mode',\n              value: 'CircularEraser',\n              values: [\n                { value: 'CircularEraser', label: 'Circle' },\n                { value: 'SphereEraser', label: 'Sphere' },\n              ],\n              commands: 'setToolActiveToolbar',\n            },\n          ],\n        },\n        {\n          id: 'Threshold',\n          icon: 'icon-tool-threshold',\n          label: 'Threshold Tool',\n          evaluate: {\n            name: 'evaluate.cornerstone.segmentation',\n            toolNames: ['ThresholdCircularBrush', 'ThresholdSphereBrush'],\n          },\n          options: [\n            {\n              name: 'Radius (mm)',\n              id: 'threshold-radius',\n              type: 'range',\n              min: 0.5,\n              max: 99.5,\n              step: 0.5,\n              value: 25,\n              commands: {\n                commandName: 'setBrushSize',\n                commandOptions: {\n                  toolNames: [\n                    'ThresholdCircularBrush',\n                    'ThresholdSphereBrush',\n                    'ThresholdCircularBrushDynamic',\n                  ],\n                },\n              },\n            },\n\n            {\n              name: 'Threshold',\n              type: 'radio',\n              id: 'dynamic-mode',\n              value: 'ThresholdRange',\n              values: [\n                { value: 'ThresholdDynamic', label: 'Dynamic' },\n                { value: 'ThresholdRange', label: 'Range' },\n              ],\n              commands: ({ value, commandsManager }) => {\n                if (value === 'ThresholdDynamic') {\n                  commandsManager.run('setToolActive', {\n                    toolName: 'ThresholdCircularBrushDynamic',\n                  });\n                } else {\n                  commandsManager.run('setToolActive', {\n                    toolName: 'ThresholdCircularBrush',\n                  });\n                }\n              },\n            },\n            {\n              name: 'Shape',\n              type: 'radio',\n              id: 'eraser-mode',\n              value: 'ThresholdCircularBrush',\n              values: [\n                { value: 'ThresholdCircularBrush', label: 'Circle' },\n                { value: 'ThresholdSphereBrush', label: 'Sphere' },\n              ],\n              condition: ({ options }) =>\n                options.find(option => option.id === 'dynamic-mode').value === 'ThresholdRange',\n              commands: 'setToolActiveToolbar',\n            },\n            {\n              name: 'ThresholdRange',\n              type: 'double-range',\n              id: 'threshold-range',\n              min: 0,\n              max: 50,\n              step: 0.5,\n              value: [2.5, 50],\n              condition: ({ options }) =>\n                options.find(option => option.id === 'dynamic-mode').value === 'ThresholdRange',\n              commands: {\n                commandName: 'setThresholdRange',\n                commandOptions: {\n                  toolNames: ['ThresholdCircularBrush', 'ThresholdSphereBrush'],\n                },\n              },\n            },\n          ],\n        },\n      ],\n    },\n  },\n];\n\nexport default toolbarButtons;\n","import packageJson from '../package.json';\n\nconst id = packageJson.name;\n\nexport { id };\n","import { hotkeys, classes } from '@ohif/core';\nimport toolbarButtons from './toolbarButtons.js';\nimport { id } from './id.js';\nimport initToolGroups from './initToolGroups.js';\nimport setCrosshairsConfiguration from './utils/setCrosshairsConfiguration.js';\nimport setFusionActiveVolume from './utils/setFusionActiveVolume.js';\nimport i18n from 'i18next';\nimport moreTools from './moreTools';\n\nconst { MetadataProvider } = classes;\n\nconst ohif = {\n  layout: '@ohif/extension-default.layoutTemplateModule.viewerLayout',\n  sopClassHandler: '@ohif/extension-default.sopClassHandlerModule.stack',\n  measurements: '@ohif/extension-default.panelModule.measure',\n  thumbnailList: '@ohif/extension-default.panelModule.seriesList',\n};\n\nconst cs3d = {\n  viewport: '@ohif/extension-cornerstone.viewportModule.cornerstone',\n  segPanel: '@ohif/extension-cornerstone-dicom-seg.panelModule.panelSegmentation',\n};\n\nconst tmtv = {\n  hangingProtocol: '@ohif/extension-tmtv.hangingProtocolModule.ptCT',\n  petSUV: '@ohif/extension-tmtv.panelModule.petSUV',\n  toolbox: '@ohif/extension-tmtv.panelModule.tmtvBox',\n  export: '@ohif/extension-tmtv.panelModule.tmtvExport',\n};\n\nconst extensionDependencies = {\n  // Can derive the versions at least process.env.from npm_package_version\n  '@ohif/extension-default': '^3.0.0',\n  '@ohif/extension-cornerstone': '^3.0.0',\n  '@ohif/extension-cornerstone-dicom-seg': '^3.0.0',\n  '@ohif/extension-tmtv': '^3.0.0',\n  Report: '^0.0.1',\n};\nconst unsubscriptions = [];\n\nfunction modeFactory({ modeConfiguration }) {\n  return {\n    // TODO: We're using this as a route segment\n    // We should not be.\n    id,\n    routeName: 'tmtv',\n    displayName: i18n.t('Modes:Total Metabolic Tumor Volume'),\n    /**\n     * Lifecycle hooks\n     */\n    onModeEnter: ({ servicesManager, extensionManager, commandsManager }: withAppTypes) => {\n      const {\n        toolbarService,\n        toolGroupService,\n        customizationService,\n        hangingProtocolService,\n        displaySetService,\n      } = servicesManager.services;\n\n      const utilityModule = extensionManager.getModuleEntry(\n        '@ohif/extension-cornerstone.utilityModule.tools'\n      );\n\n      const { toolNames, Enums } = utilityModule.exports;\n\n      // Init Default and SR ToolGroups\n      initToolGroups(toolNames, Enums, toolGroupService, commandsManager, null, servicesManager);\n\n      const { unsubscribe } = toolGroupService.subscribe(\n        toolGroupService.EVENTS.VIEWPORT_ADDED,\n        () => {\n          // For fusion toolGroup we need to add the volumeIds for the crosshairs\n          // since in the fusion viewport we don't want both PT and CT to render MIP\n          // when slabThickness is modified\n          const { displaySetMatchDetails } = hangingProtocolService.getMatchDetails();\n\n          setCrosshairsConfiguration(\n            displaySetMatchDetails,\n            toolNames,\n            toolGroupService,\n            displaySetService\n          );\n\n          setFusionActiveVolume(\n            displaySetMatchDetails,\n            toolNames,\n            toolGroupService,\n            displaySetService\n          );\n        }\n      );\n\n      unsubscriptions.push(unsubscribe);\n      toolbarService.addButtons(toolbarButtons);\n      toolbarService.createButtonSection('primary', [\n        'MeasurementTools',\n        'EllipticalROI',\n        'RectangleROI',\n        'Zoom',\n        'Magnify',\n        'Pan',\n        'TrackballRotate',\n        'WindowLevel',\n        'StackScroll',\n        'Probe',\n        'Capture',\n        'Layout',\n        'Crosshairs',\n        'Cine',\n        'Angle',\n        'MoreTools',\n      ]);\n      toolbarService.createButtonSection('ROIThresholdToolbox', [\n        'RectangleROIStartEndThreshold',\n        'BrushTools',\n      ]);\n\n      customizationService.addModeCustomizations([\n        {\n          id: 'segmentation.panel',\n          segmentationPanelMode: 'expanded',\n          addSegment: false,\n          onSegmentationAdd: () => {\n            commandsManager.run('createNewLabelmapFromPT');\n          },\n        },\n      ]);\n\n      // For the hanging protocol we need to decide on the window level\n      // based on whether the SUV is corrected or not, hence we can't hard\n      // code the window level in the hanging protocol but we add a custom\n      // attribute to the hanging protocol that will be used to get the\n      // window level based on the metadata\n      hangingProtocolService.addCustomAttribute(\n        'getPTVOIRange',\n        'get PT VOI based on corrected or not',\n        props => {\n          const ptDisplaySet = props.find(imageSet => imageSet.Modality === 'PT');\n\n          if (!ptDisplaySet) {\n            return;\n          }\n\n          const { imageId } = ptDisplaySet.images[0];\n          const imageIdScalingFactor = MetadataProvider.get('scalingModule', imageId);\n\n          const isSUVAvailable = imageIdScalingFactor && imageIdScalingFactor.suvbw;\n\n          if (isSUVAvailable) {\n            return {\n              windowWidth: 5,\n              windowCenter: 2.5,\n            };\n          }\n\n          return;\n        }\n      );\n    },\n    onModeExit: ({ servicesManager }: withAppTypes) => {\n      const {\n        toolGroupService,\n        syncGroupService,\n        segmentationService,\n        cornerstoneViewportService,\n        uiDialogService,\n        uiModalService,\n      } = servicesManager.services;\n\n      unsubscriptions.forEach(unsubscribe => unsubscribe());\n      uiDialogService.dismissAll();\n      uiModalService.hide();\n      toolGroupService.destroy();\n      syncGroupService.destroy();\n      segmentationService.destroy();\n      cornerstoneViewportService.destroy();\n    },\n    validationTags: {\n      study: [],\n      series: [],\n    },\n    isValidMode: ({ modalities, study }) => {\n      const modalities_list = modalities.split('\\\\');\n      const invalidModalities = ['SM'];\n\n      const isValid =\n        modalities_list.includes('CT') &&\n        study.mrn !== 'M1' &&\n        modalities_list.includes('PT') &&\n        !invalidModalities.some(modality => modalities_list.includes(modality)) &&\n        // This is study is a 4D study with PT and CT and not a 3D study for the tmtv\n        // mode, until we have a better way to identify 4D studies we will use the\n        // StudyInstanceUID to identify the study\n        // Todo: when we add the 4D mode which comes with a mechanism to identify\n        // 4D studies we can use that\n        study.studyInstanceUid !== '1.3.6.1.4.1.12842.1.1.14.3.20220915.105557.468.2963630849';\n\n      // there should be both CT and PT modalities and the modality should not be SM\n      return {\n        valid: isValid,\n        description: 'The mode requires both PT and CT series in the study',\n      };\n    },\n    routes: [\n      {\n        path: 'tmtv',\n        /*init: ({ servicesManager, extensionManager }) => {\n          //defaultViewerRouteInit\n        },*/\n        layoutTemplate: () => {\n          return {\n            id: ohif.layout,\n            props: {\n              leftPanels: [ohif.thumbnailList],\n              leftPanelClosed: true,\n              rightPanels: [\n                [tmtv.toolbox, cs3d.segPanel, tmtv.export],\n                'Report.panelModule.Report',\n                tmtv.petSUV,\n              ],\n              viewports: [\n                {\n                  namespace: cs3d.viewport,\n                  displaySetsToDisplay: [ohif.sopClassHandler],\n                },\n              ],\n            },\n          };\n        },\n      },\n    ],\n    extensions: extensionDependencies,\n    hangingProtocol: tmtv.hangingProtocol,\n    sopClassHandlers: [ohif.sopClassHandler],\n    hotkeys: [...hotkeys.defaults.hotkeyBindings],\n    ...modeConfiguration,\n  };\n}\n\nconst mode = {\n  id,\n  modeFactory,\n  extensionDependencies,\n};\n\nexport default mode;\n","import { toolGroupIds } from '../initToolGroups';\n\nexport default function setCrosshairsConfiguration(\n  matches,\n  toolNames,\n  toolGroupService,\n  displaySetService\n) {\n  const matchDetails = matches.get('ctDisplaySet');\n\n  if (!matchDetails) {\n    return;\n  }\n\n  const { SeriesInstanceUID } = matchDetails;\n  const displaySets = displaySetService.getDisplaySetsForSeries(SeriesInstanceUID);\n\n  const toolConfig = toolGroupService.getToolConfiguration(\n    toolGroupIds.Fusion,\n    toolNames.Crosshairs\n  );\n\n  const crosshairsConfig = {\n    ...toolConfig,\n    filterActorUIDsToSetSlabThickness: [displaySets[0].displaySetInstanceUID],\n  };\n\n  toolGroupService.setToolConfiguration(\n    toolGroupIds.Fusion,\n    toolNames.Crosshairs,\n    crosshairsConfig\n  );\n}\n","import { toolGroupIds } from '../initToolGroups';\n\nexport default function setFusionActiveVolume(\n  matches,\n  toolNames,\n  toolGroupService,\n  displaySetService\n) {\n  const matchDetails = matches.get('ptDisplaySet');\n\n  if (!matchDetails) {\n    return;\n  }\n\n  const { SeriesInstanceUID } = matchDetails;\n\n  const displaySets = displaySetService.getDisplaySetsForSeries(SeriesInstanceUID);\n\n  if (!displaySets || displaySets.length === 0) {\n    return;\n  }\n\n  const wlToolConfig = toolGroupService.getToolConfiguration(\n    toolGroupIds.Fusion,\n    toolNames.WindowLevel\n  );\n\n  const ellipticalToolConfig = toolGroupService.getToolConfiguration(\n    toolGroupIds.Fusion,\n    toolNames.EllipticalROI\n  );\n\n  // Todo: this should not take into account the loader id\n  const volumeId = `cornerstoneStreamingImageVolume:${displaySets[0].displaySetInstanceUID}`;\n\n  const windowLevelConfig = {\n    ...wlToolConfig,\n    volumeId,\n  };\n\n  const ellipticalROIConfig = {\n    ...ellipticalToolConfig,\n    volumeId,\n  };\n\n  toolGroupService.setToolConfiguration(\n    toolGroupIds.Fusion,\n    toolNames.WindowLevel,\n    windowLevelConfig\n  );\n\n  toolGroupService.setToolConfiguration(\n    toolGroupIds.Fusion,\n    toolNames.EllipticalROI,\n    ellipticalROIConfig\n  );\n}\n"],"names":["toolGroupIds","CT","PT","Fusion","MIP","default","toolNames","Enums","toolGroupService","commandsManager","modeLabelConfig","servicesManager","tools","active","toolName","WindowLevel","bindings","mouseButton","MouseBindings","Primary","Pan","Auxiliary","Zoom","Secondary","StackScrollMouseWheel","passive","Length","ArrowAnnotate","configuration","getTextCallback","callback","eventDetails","runCommand","changeTextCallback","data","undefined","Bidirectional","DragProbe","Probe","EllipticalROI","RectangleROI","StackScroll","Angle","CobbAngle","Magnify","parentTool","activeStrategy","strategySpecificConfiguration","THRESHOLD","isDynamic","dynamicRadius","enabled","SegmentationDisplay","disabled","Crosshairs","disableOnPassive","autoPan","panSize","createToolGroupAndAddTools","mipTools","VolumeRotateMouseWheel","rotateIncrementDegrees","MipJumpToClick","toolGroupId","OrientationMarker","orientationWidget","viewportCorner","_initToolGroups","createButton","ToolbarService","setToolActiveToolbar","commandName","commandOptions","id","uiType","props","groupId","evaluate","primary","icon","label","tooltip","commands","secondary","items","type","name","disabledText","rows","columns","options","min","max","step","value","values","run","condition","find","option","packageJson","MetadataProvider","classes","ohif","cs3d","tmtv","extensionDependencies","Report","unsubscriptions","modeFactory","modeConfiguration","routeName","displayName","i18n","t","onModeEnter","extensionManager","toolbarService","customizationService","hangingProtocolService","displaySetService","services","utilityModule","getModuleEntry","exports","initToolGroups","unsubscribe","subscribe","EVENTS","VIEWPORT_ADDED","displaySetMatchDetails","getMatchDetails","matches","matchDetails","get","SeriesInstanceUID","displaySets","getDisplaySetsForSeries","crosshairsConfig","getToolConfiguration","filterActorUIDsToSetSlabThickness","displaySetInstanceUID","setToolConfiguration","setCrosshairsConfiguration","length","wlToolConfig","ellipticalToolConfig","volumeId","windowLevelConfig","ellipticalROIConfig","setFusionActiveVolume","push","addButtons","toolbarButtons","createButtonSection","addModeCustomizations","segmentationPanelMode","addSegment","onSegmentationAdd","addCustomAttribute","ptDisplaySet","imageSet","Modality","imageId","images","imageIdScalingFactor","suvbw","windowWidth","windowCenter","onModeExit","syncGroupService","segmentationService","cornerstoneViewportService","uiDialogService","uiModalService","forEach","dismissAll","hide","destroy","validationTags","study","series","isValidMode","modalities","modalities_list","split","valid","includes","mrn","some","modality","studyInstanceUid","description","routes","path","layoutTemplate","leftPanels","leftPanelClosed","rightPanels","viewports","namespace","displaySetsToDisplay","extensions","hangingProtocol","sopClassHandlers","hotkeys","defaults","hotkeyBindings"],"sourceRoot":""}